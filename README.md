[![code style: prettier](https://img.shields.io/badge/code_style-prettier-ff69b4.svg?style=flat-square)](https://github.com/prettier/prettier)
[![jest](https://jestjs.io/img/jest-badge.svg)](https://github.com/facebook/jest)

# `minesweeper-react`

An XP Minesweeper clone using React (for fun).

## Roadmap

At the moment, this is just a pretty bare-bones recreation of the game. However, in the future,
I intend to split out the internal logic into a separate library that could be used to create
a Minesweeper clone in whatever front end framework you like - or no framework at all, if that's
your jam!

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [Data Model](#data-model)
    -   [MinesweeperConfig](#minesweeperconfig)
        -   [Properties](#properties)
    -   [MinesweeperBoard](#minesweeperboard)
    -   [MinesweeperCell](#minesweepercell)
        -   [Properties](#properties-1)
-   [Constants](#constants)
    -   [CELL_STATE](#cell_state)
        -   [DEFAULT](#default)
        -   [FLAGGED](#flagged)
        -   [REVEALED](#revealed)
        -   [QUESTIONED](#questioned)
    -   [CONFIG_EASY](#config_easy)
    -   [CONFIG_INTERMEDIATE](#config_intermediate)
    -   [CONFIG_EXPERT](#config_expert)
    -   [CONFIG_DEFAULT](#config_default)
-   [Errors](#errors)
    -   [InvalidConfigError](#invalidconfigerror)
        -   [Parameters](#parameters)
    -   [OutOfBoundsError](#outofboundserror)
        -   [Parameters](#parameters-1)
-   [isConfigValid](#isconfigvalid)
    -   [Parameters](#parameters-2)
    -   [Examples](#examples)
-   [isOutOfBounds](#isoutofbounds)
    -   [Parameters](#parameters-3)
    -   [Examples](#examples-1)
-   [getBoard](#getboard)
    -   [Parameters](#parameters-4)
    -   [Examples](#examples-2)
-   [forEachAdjacentCellCallback](#foreachadjacentcellcallback)
    -   [Parameters](#parameters-5)
-   [forEachAdjacentCell](#foreachadjacentcell)
    -   [Parameters](#parameters-6)
    -   [Examples](#examples-3)
-   [placeMine](#placemine)
    -   [Parameters](#parameters-7)
    -   [Examples](#examples-4)
-   [placeMines](#placemines)
    -   [Parameters](#parameters-8)
    -   [Examples](#examples-5)
-   [cascadeCells](#cascadecells)
    -   [Parameters](#parameters-9)
    -   [Examples](#examples-6)

### Data Model

The data structures used in the API.


#### MinesweeperConfig

Configuration object that defines a board's setup.

Type: {x: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number), y: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number), mines: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)}

##### Properties

-   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Number of mines on the X axis. _Note:_ Must be >= `0`.
-   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Number of mines on the Y axis. _Note:_ Must be >= `0`.
-   `mines` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Number of mines contained on the board.
     _Note:_ Must adhere to the following rules:-   Must be >= `0`.
    -   Must be &lt;= the product of `x` and `y`.

#### MinesweeperBoard

2-dimensional [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array) representing a board in Minesweeper.

**Note:** The first order of [Arrays](Array) represents the rows of the
 board, and the second order represents the columns. This means that the Y
 coordinate of a given [MinesweeperCell](#minesweepercell) is used as the index of the first order
 and the X coordinate is used as the index of the second order.

Type: [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;[MinesweeperCell](#minesweepercell)>>

#### MinesweeperCell

Object representing a cell on the board. These comprise the makeup of the
 [MinesweeperBoard](#minesweeperboard).

Type: {hasMine: [boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean), mineCount: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number), state: [CELL_STATE](#cell_state)}

##### Properties

-   `hasMine` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Indicates whether or not this cell contains a
     mine. Default value is `false`.
-   `mineCount` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Indicates how many mines are adjacent to this
     cell. Default value is `0`.
-   `state` **[CELL_STATE](#cell_state)** Enum value indicating what state the cell is in.
     Default value is `CELL_STATE.DEFAULT`.

### Constants

Constant values used internally as well as a set of pre-built configuration
objects representing the 3 different difficulty levels.


#### CELL_STATE

Enum for cell states

Type: [number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)

##### DEFAULT

Initial state of all [Cells](Cell). Defined as the absence of all other state.

##### FLAGGED

The user has placed a flag on this [MinesweeperCell](#minesweepercell). Flagged [Cells](Cell) are not revealed when the user clicks on them.

##### REVEALED

The user has revealed this [MinesweeperCell](#minesweepercell). Once a [MinesweeperCell](#minesweepercell) is revealed, the user can no longer interact with a cell.

##### QUESTIONED

The user has marked this [MinesweeperCell](#minesweepercell) with a question mark indicating that they are unsure whether or not this [MinesweeperCell](#minesweepercell) contains a mine.

#### CONFIG_EASY

A 9×9 board with 10 mines.

Type: [MinesweeperConfig](#minesweeperconfig)

#### CONFIG_INTERMEDIATE

A 16×16 board with 40 mines.

Type: [MinesweeperConfig](#minesweeperconfig)

#### CONFIG_EXPERT

A 30×16 board with 99 mines.

Type: [MinesweeperConfig](#minesweeperconfig)

#### CONFIG_DEFAULT

A 0×0 board with 0 mines. The initial state of a board before a different configuration is loaded.

Type: [MinesweeperConfig](#minesweeperconfig)

### Errors

Custom error types thrown by the API functions.


#### InvalidConfigError

**Extends Error**

Indicates that the supplied configuration is not valid.
Automatically supplies the error message of `"invalid config"`.

##### Parameters

-   `params` **...any** 

#### OutOfBoundsError

**Extends Error**

Indicates that the supplied coordinates are out of bounds for the given board.
Automatically supplies the error message of `"out of bounds"`.

##### Parameters

-   `params` **...any** 

### isConfigValid

Verifies that the supplied [MinesweeperConfig](#minesweeperconfig) is valid.

#### Parameters

-   `config` **[MinesweeperConfig](#minesweeperconfig)** 

#### Examples

```javascript
const myConfig = { x: 10, y: 15, mines: 100 };
const isMyConfigValid = isConfigValid(myConfig);
console.log(isMyConfigValid); // true

console.log(isConfigValid(null)); // false
console.log(isConfigValid({ x: 5 })); // false
console.log(isConfigValid({ x: 5, y: 5 })); // false
console.log(isConfigValid({ x: 5, y: 5, mines: 1337 })); // false
console.log(isConfigValid({ x: "5", y: "5", mines: "13" })); // false
```

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

### isOutOfBounds

Determines if the supplied `x` and `y` coordinates are out of bounds for the
 given [MinesweeperConfig](#minesweeperconfig).

#### Parameters

-   `config` **[MinesweeperConfig](#minesweeperconfig)** 
-   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** 
-   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** 

#### Examples

```javascript
const myConfig = { x: 10, y: 15, mines: 100 };
console.log(isOutOfBounds(myConfig, 4, 0)); // false

console.log(isOutOfBounds(myConfig, 107, 3)); // true
console.log(isOutOfBounds(myConfig, 5, -1)); // true
console.log(isOutOfBounds(myConfig, 10, 10)); // true

isOutOfBounds(invalidConfig, 10, -1); // throws InvalidConfigError
```

-   Throws **[InvalidConfigError](#invalidconfigerror)** if `config` is not valid.

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

### getBoard

Generates the 2-dimensional [Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array) representing the board using the
 provided [MinesweeperConfig](#minesweeperconfig).

**Note:** This does not place the mines on the board. For that, you must call
 [placeMines](#placemines).

#### Parameters

-   `config` **[MinesweeperConfig](#minesweeperconfig)** 

#### Examples

```javascript
getBoard(CONFIG_EASY); // Returns a 9x9 2D Array of Cells in their default state.

const myConfig = { x: 10, y: 15, mines: 100 };
getBoard(myConfig); // Returns a 10x10 2D Array of Cells in their default state.

getBoard(invalidConfig); // throws InvalidConfigError
```

-   Throws **[InvalidConfigError](#invalidconfigerror)** if `config` is not valid.

Returns **[MinesweeperBoard](#minesweeperboard)** New blank board.

### forEachAdjacentCellCallback

The format for the `action` parameter of [forEachAdjacentCell](#foreachadjacentcell).

Type: [Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)

#### Parameters

-   `cell` **[MinesweeperCell](#minesweepercell)** The current [MinesweeperCell](#minesweepercell) in the iteration.
-   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** X coordinate of the cell.
-   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Y coordinate of the cell.

### forEachAdjacentCell

Executes the `action` callback for every cell adjacent to the target `x` and
 `y` coordinates (excluding out-of-bounds coordinates).

#### Parameters

-   `config` **[MinesweeperConfig](#minesweeperconfig)** [MinesweeperConfig](#minesweeperconfig) used to generate `board` (for reference).
-   `board` **[MinesweeperBoard](#minesweeperboard)** [MinesweeperBoard](#minesweeperboard) from which to retrive the [Cells](Cell).
-   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** X coordinate of the target [MinesweeperCell](#minesweepercell).
-   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Y coordinate of the target [MinesweeperCell](#minesweepercell).
-   `action` **[forEachAdjacentCellCallback](#foreachadjacentcellcallback)** Callback function to be exectued
     for every (valid) adjacent cell.

#### Examples

```javascript
const myConfig = { x: 10, y: 15, mines: 100 };
const myBoard = getBoard(myConfig);
forEachAdjacentCell(myConfig, myBoard, 0, 5, (cell, x, y) => {
  console.log({ x, y });
});
// Will output the following:
//  { x: 0, y: 4 }
//  { x: 0, y: 6 }
//  { x: 1, y: 4 }
//  { x: 1, y: 5 }
//  { x: 1, y: 6 }
```

-   Throws **[InvalidConfigError](#invalidconfigerror)** if `config` is not valid.
-   Throws **[OutOfBoundsError](#outofboundserror)** if `x` and `y` indicate a cell that is out of
     bounds for `config`.

Returns **void** 

### placeMine

Modifies the given [MinesweeperBoard](#minesweeperboard) by setting `hasMine` to `true` for the
 [MinesweeperCell](#minesweepercell) at the specified `x` and `y` coordinates and increments
 `mineCount` for all adjacent cells.

This function is used by [placeMines](#placemines) to populate a board.

If the specified [MinesweeperCell](#minesweepercell) already has a mine, this function does nothing
 and returns `false`.

**Warning:** This is <u>not</u> a pure function.

#### Parameters

-   `config` **[MinesweeperConfig](#minesweeperconfig)** [MinesweeperConfig](#minesweeperconfig) used to generate `board` (for reference).
-   `board` **[MinesweeperBoard](#minesweeperboard)** [MinesweeperBoard](#minesweeperboard) on which to place the mine.
-   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** X coordinate of the target [MinesweeperCell](#minesweepercell).
-   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Y coordinate of the target [MinesweeperCell](#minesweepercell).

#### Examples

```javascript
const myConfig = { x: 10, y: 15, mines: 100 };
const myBoard = getBoard(myConfig);
console.log(myBoard[7][4].hasMine) // false

placeMine(myConfig, myBoard, 4, 7)
console.log(myBoard[7][4].hasMine) // true

console.log(myBoard[6][3].mineCount) // 1
console.log(myBoard[7][3].mineCount) // 1
console.log(myBoard[8][3].mineCount) // 1
console.log(myBoard[6][4].mineCount) // 1
console.log(myBoard[8][4].mineCount) // 1
console.log(myBoard[6][5].mineCount) // 1
console.log(myBoard[7][5].mineCount) // 1
console.log(myBoard[8][5].mineCount) // 1

placeMine(myConfig, myBoard, 4, 5)

console.log(myBoard[4][3].mineCount) // 1
console.log(myBoard[5][3].mineCount) // 1
console.log(myBoard[6][3].mineCount) // 2
console.log(myBoard[4][4].mineCount) // 1
console.log(myBoard[6][4].mineCount) // 2
console.log(myBoard[4][5].mineCount) // 1
console.log(myBoard[5][5].mineCount) // 1
console.log(myBoard[6][5].mineCount) // 2

placeMine(invalidConfig, [][], 0, 0) // throws InvalidConfigError
placeMine(myConfig, myBoard, 100, 3) // throws OutOfBoundsError
```

-   Throws **[InvalidConfigError](#invalidconfigerror)** if `config` is not valid.
-   Throws **[OutOfBoundsError](#outofboundserror)** if `x` and `y` indicate a cell that is out of
     bounds for `config`.

Returns **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** `true` if a modification took place; `false` otherwise.

### placeMines

Randomly places mines on `board` (using [placeMine](#placemine)), avoiding the
 [MinesweeperCell](#minesweepercell) specified by `seedX` and `seedY`.

In practice, the board is not populated with mines until the user clicks the
 first cell. This means that the first cell the user clicks can never be a
 mine, and this is why [getBoard](#getboard) and this function are separate.

**Warning:** This is <u>not</u> a pure function.

#### Parameters

-   `config` **[MinesweeperConfig](#minesweeperconfig)** [MinesweeperConfig](#minesweeperconfig) used to generate `board` (for reference).
-   `board` **[MinesweeperBoard](#minesweeperboard)** [MinesweeperBoard](#minesweeperboard) on which to place the mines.
-   `seedX` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** X coordinate of the seed [MinesweeperCell](#minesweepercell).
-   `seedY` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Y coordinate of the seed [MinesweeperCell](#minesweepercell).

#### Examples

```javascript
const myConfig = { x: 10, y: 15, mines: 100 }
const myBoard = getBoard(myConfig)

placeMines(myConfig, myBoard, 4, 7)

// `myBoard` will now be randomly populated with mines and the cells'
//  `mineCount` will be set.
```

-   Throws **[InvalidConfigError](#invalidconfigerror)** if `config` is not valid.
-   Throws **[OutOfBoundsError](#outofboundserror)** if `seedX` and `seedY` indicate a cell that is out
     of bounds for `config`.

Returns **[MinesweeperBoard](#minesweeperboard)** Modified `board` with randomly placed mines.

### cascadeCells

If the origin [MinesweeperCell](#minesweepercell) specified by `x` and `y` is "empty" (has a
 `mineCount` of `0`), this function modifies `board` by revealing all empty
 and empty-adjacent [Cells](Cell); otherwise, this function does nothing.

**Warning:** This is <u>not</u> a pure function.

#### Parameters

-   `config` **[MinesweeperConfig](#minesweeperconfig)** [MinesweeperConfig](#minesweeperconfig) used to generate `board` (for reference).
-   `board` **[MinesweeperBoard](#minesweeperboard)** [MinesweeperBoard](#minesweeperboard) for which to reveal the [Cells](Cell).
-   `x` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** X coordinate of the origin [MinesweeperCell](#minesweepercell).
-   `y` **[number](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number)** Y coordinate of the origin [MinesweeperCell](#minesweepercell).

#### Examples

```javascript
const myConfig = { x: 5, y: 5, mines: 10 }
const myBoard = getBoard(myConfig)
placeMines(myConfig, myBoard, 0, 0)

// Assume the following board (x = mine):
//  1 1 0 0 0
//  x 4 2 1 0
//  x x x 4 2
//  x x x x x
//  x 4 3 3 2

cascadeCells(myConfig, myBoard, 2, 0)

// This will reveal the following cells (r = revealed):
//  - r r r r
//  - r r r r
//  - - - r r
//  - - - - -
//  - - - - -

cascadeCells(myConfig, myBoard, 1, 4)
// Since the target cell would have a `minCount` of 4, this would do nothing.

cascadeCells(invalidConfig, [][], 0, 0) // throws InvalidConfigError
cascadeCells(myConfig, myBoard, 100, 100) // throws OutOfBoundsError
```

-   Throws **[InvalidConfigError](#invalidconfigerror)** if `config` is not valid.
-   Throws **[OutOfBoundsError](#outofboundserror)** if `x` and `y` indicate a cell that is out of
     bounds for `config`.

Returns **void** 
